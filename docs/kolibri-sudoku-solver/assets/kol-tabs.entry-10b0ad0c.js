import{U as b,O as n,C as d,o as r,A as h}from"./index-294842fb.js";import{o as c}from"./i18n-d0bb1d99-ef458e53.js";import{n as u}from"./align-0c96facf-05ccab87.js";import{f as p}from"./label-0d258cd5-df9469c6.js";import{r as g,l as f,v}from"./a11y.tipps-583a2096-ea796d66.js";import{$ as _,P as m,J as k,K as w}from"./prop.validators-125a3282-9e7c3ce9.js";import"./alignment-84fc6207-42b58888.js";/*!
 * KoliBri - The accessible HTML-Standard
 */const y=":host{--a11y-min-size:44px;font-size:inherit}*{font-family:Verdana;hyphens:auto;letter-spacing:inherit;word-break:break-word;word-spacing:inherit}[role='button'],button:not([role='link']),kol-input .input{min-height:var(--a11y-min-size);min-width:var(--a11y-min-size)}a,button,h1,h2,h3,h4,h5,h6,input,option,select,textarea{font-family:inherit;font-size:inherit}:is(a,button){background-color:transparent;border:none;margin:0;padding:0;width:100%;}:host{max-width:100%}*{box-sizing:border-box}kol-span-wc{display:grid;place-items:center}kol-span-wc>span{display:flex;place-items:center}a,button{cursor:pointer}button,input,option,select,textarea{font-family:inherit}.icon-only>kol-span-wc>span>span{display:none}:host{display:block}kol-button-group-wc{display:inline-flex;flex-wrap:wrap}kol-button-group-wc button{border-bottom-color:transparent;border-bottom-style:solid;display:block}div.grid,div[role='tabpanel']{height:100%}:host>.tabs-align-right{display:grid;grid-template-columns:1fr auto}:host>.tabs-align-right kol-button-group-wc{display:grid;order:2}:host>.tabs-align-left{display:grid;grid-template-columns:auto 1fr}:host>.tabs-align-left kol-button-group-wc{display:grid;order:0}:host>.tabs-align-bottom{display:grid;grid-template-rows:1fr auto}:host>.tabs-align-bottom kol-button-group-wc{order:2}:host>.tabs-align-bottom kol-button-group-wc>div{display:flex}:host>.tabs-align-bottom>kol-button-group-wc>div>div:first-child{margin:0 1em 0 0}:host>.tabs-align-bottom>kol-button-group-wc>div>div{margin:0 1em}:host>.tabs-align-top{display:grid;grid-template-rows:auto 1fr}:host>.tabs-align-top kol-button-group-wc{order:0}:host>.tabs-align-top kol-button-group-wc>div{display:flex}:host>.tabs-align-top>kol-button-group-wc>div>div:first-child{margin:0 1em 0 0}:host>.tabs-align-top>kol-button-group-wc>div>div{margin:0 1em}:host>div{display:grid}:host>.tabs-align-left kol-button-group-wc,:host>.tabs-align-top kol-button-group-wc{order:0}:host>.tabs-align-bottom kol-button-group-wc,:host>.tabs-align-right kol-button-group-wc{order:1}:host>div.tabs-align-left kol-button-group-wc>div,:host>div.tabs-align-left kol-button-group-wc>div>div,:host>div.tabs-align-right kol-button-group-wc>div,:host>div.tabs-align-right kol-button-group-wc>div>div{display:grid}:host>div.tabs-align-left kol-button-group-wc>div>div kol-button-wc,:host>div.tabs-align-right kol-button-group-wc>div>div kol-button-wc{width:100%}:host>div.tabs-align-bottom kol-button-group-wc div,:host>div.tabs-align-top kol-button-group-wc div{display:flex;flex-wrap:wrap}",T=class{constructor(e){b(this,e),this.onCreateLabel=`${c("kol-new")} …`,this.showCreateTab=!1,this.nextPossibleTabIndex=(t,o,a)=>{if(a>0){if(o+a<t.length)return t[o+a]._disabled?this.nextPossibleTabIndex(t,o,a+1):o+a}else if(a<0&&o+a>=0)return t[o+a]._disabled?this.nextPossibleTabIndex(t,o,a-1):o+a;return o},this.onKeyDown=t=>{const o=setTimeout(()=>{clearTimeout(o);let a=null;switch(t.key){case"ArrowRight":a=this.nextPossibleTabIndex(this.state._tabs,this.state._selected,1);break;case"ArrowLeft":a=this.nextPossibleTabIndex(this.state._tabs,this.state._selected,-1)}a!==null&&this.onSelect(t,a,!0)},250)},this.onClickSelect=(t,o)=>{this.onSelect(t,o,!0)},this.onMouseDown=t=>{t.preventDefault(),t.stopPropagation()},this.callbacks={onClick:this.onClickSelect,onMouseDown:this.onMouseDown},this.catchTabPanelHost=t=>{this.tabPanelHost=t},this.selectNextNotDisabledTab=(t,o,a=!0,i)=>{if(t>o.length-1&&(t=o.length-1),t<0&&(t=0),Array.isArray(o)&&o[t]&&o[t]._disabled){if(a===!0){if(t<o.length-1)return this.selectNextNotDisabledTab(t+1,o,!0,i||t);t=i||t,a=!1}if(a===!1){if(t>0)return this.selectNextNotDisabledTab(t-1,o,!1,i||t);g("[KolTabs] Alle Tabs sind deaktiviert und somit kann kein Tab angezeigt werden.")}}return t},this.syncSelectedAndTabs=(t,o,a,i)=>{let s,l;s=i==="_selected"?t:this.state._selected,l=i==="_tabs"?t:this.state._tabs,l.length>0&&o.set("_selected",this.selectNextNotDisabledTab(s,l))},this.handleTabPanels=()=>{var t,o,a;if(this.tabPanelHost instanceof HTMLDivElement)for(let i=this.tabPanelHost.children.length;i<this.state._tabs.length;i++){const s=document.createElement("div");s.setAttribute("aria-labelledby",`${this.state._label.replace(/\s/g,"-")}-tab-${i}`),s.setAttribute("id",`tabpanel-${i}`),s.setAttribute("role","tabpanel"),s.setAttribute("hidden","");const l=document.createElement("slot");l.setAttribute("name",`tabpanel-slot-${i}`),s.appendChild(l),this.tabPanelHost.appendChild(s),((t=this.host)===null||t===void 0?void 0:t.children)instanceof HTMLCollection&&(!((o=this.host)===null||o===void 0)&&o.children[i])&&((a=this.host)===null||a===void 0||a.children[i].setAttribute("slot",`tabpanel-slot-${i}`))}},this.onCreate=t=>{var o,a;t.preventDefault(),t.stopPropagation(),typeof((o=this.state._on)===null||o===void 0?void 0:o.onCreate)=="function"&&((a=this.state._on)===null||a===void 0||a.onCreate(t))},this._align="top",this._label=void 0,this._on=void 0,this._selected=0,this._tabs=void 0,this.state={_align:"top",_label:"…",_selected:0,_tabs:[]}}renderButtonGroup(){return n("kol-button-group-wc",{role:"tablist","aria-label":this.state._label,onKeyDown:this.onKeyDown},this.state._tabs.map((e,t)=>n("kol-button-wc",{_disabled:e._disabled,_icons:e._icons,_hideLabel:e._hideLabel,_label:e._label,_on:this.callbacks,_tabIndex:this.state._selected===t?0:-1,_tooltipAlign:e._tooltipAlign,_variant:this.state._selected===t?"custom":void 0,_customClass:this.state._selected===t?"selected":void 0,_ariaControls:`tabpanel-${t}`,_ariaSelected:this.state._selected===t,_id:`${this.state._label.replace(/\s/g,"-")}-tab-${t}`,_role:"tab",_value:t})),this.showCreateTab&&n("kol-button-wc",{class:"create-button",_label:this.onCreateLabel,_on:{onClick:this.onCreate}}))}render(){return n(d,null,n("div",{ref:e=>{this.tabPanelsElement=e},class:{[`tabs-align-${this.state._align}`]:!0}},this.renderButtonGroup(),n("div",{ref:this.catchTabPanelHost})))}validateAlign(e){u(this,e)}validateLabel(e){p(this,e)}validateOn(e){if(typeof e=="object"&&e!==null){f("[KolTabs] Prüfen, wie man auch einen EventCallback einzeln ändern kann.");const t={};typeof e.onCreate!="function"&&typeof e.onCreate!="object"||(typeof e.onCreate=="object"?(typeof e.onCreate.label=="string"&&e.onCreate.label.length>0?this.onCreateLabel=e.onCreate.label:r.debug(`[KolTabs] Der Label-Text für Neu in {
  onCreate: {
    label: string (!),
    callback: Function
  }
} ist nicht korrekt gesetzt.`),typeof e.onCreate.callback=="function"?t.onCreate=e.onCreate.callback:r.debug(`[KolTabs] Die onCreate-Callback-Funktion für Neu in {
  onCreate: {
    label: string,
    callback: Function (!)
  }
} ist nicht korrekt gesetzt.`)):t.onCreate=e.onCreate,this.showCreateTab=typeof t.onCreate=="function"),typeof e.onSelect=="function"&&(t.onSelect=e.onSelect),_(this,"_on",t)}}validateSelected(e){m(this,"_selected",e,{hooks:{beforePatch:this.syncSelectedAndTabs}})}validateTabs(e){k(this,"_tabs",t=>typeof t=="object"&&t!==null&&typeof t._label=="string"&&t._label.length>0,e,void 0,{hooks:{beforePatch:this.syncSelectedAndTabs}}),v("KolTabs",this.state._tabs.length)}componentWillLoad(){this.validateAlign(this._align),this.validateLabel(this._label),this.validateOn(this._on),this.validateSelected(this._selected),this.validateTabs(this._tabs)}componentDidRender(){if(this.handleTabPanels(),this.tabPanelHost instanceof HTMLDivElement)for(let e=0;e<this.tabPanelHost.children.length;e++)e!==this.state._selected?this.tabPanelHost.children[e].setAttribute("hidden",""):this.tabPanelHost.children[e].removeAttribute("hidden")}onSelect(e,t,o=!1){var a,i;this._selected=t,typeof((a=this._on)===null||a===void 0?void 0:a.onSelect)=="function"&&((i=this._on)===null||i===void 0||i.onSelect(e,t)),o===!0&&(this.selectedTimeout=setTimeout(()=>{if(clearTimeout(this.selectedTimeout),this.tabPanelsElement){const s=w(`button#${this.state._label.replace(/\s/g,"-")}-tab-${t}`,this.tabPanelsElement);s==null||s.focus()}},250))}get host(){return h(this)}static get watchers(){return{_align:["validateAlign"],_label:["validateLabel"],_on:["validateOn"],_selected:["validateSelected"],_tabs:["validateTabs"]}}};T.style={default:y};export{T as kol_tabs};
