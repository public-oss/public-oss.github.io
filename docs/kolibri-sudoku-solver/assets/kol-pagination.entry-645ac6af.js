import{U as c,f as d,s as r,O as o,C as b}from"./index-294842fb.js";import{o as n}from"./i18n-d0bb1d99-ef458e53.js";import{s as v,r as m}from"./custom-class-44d7cc63-8d464c98.js";import{f as C}from"./label-0d258cd5-df9469c6.js";import{t as f}from"./tooltip-align-fe8fbb60-2ab1e478.js";import{P as h,D as y,J as z,W as S}from"./prop.validators-125a3282-9e7c3ce9.js";import{a as p,n as k}from"./unique-nav-labels-c6750f60-49f40b51.js";import"./a11y.tipps-583a2096-ea796d66.js";import"./alignment-84fc6207-42b58888.js";/*!
 * KoliBri - The accessible HTML-Standard
 */const P=(i,t,e)=>{h(i,"_max",t,e)},x=":host{--a11y-min-size:44px;font-size:inherit}*{font-family:Verdana;hyphens:auto;letter-spacing:inherit;word-break:break-word;word-spacing:inherit}[role='button'],button:not([role='link']),kol-input .input{min-height:var(--a11y-min-size);min-width:var(--a11y-min-size)}a,button,h1,h2,h3,h4,h5,h6,input,option,select,textarea{font-family:inherit;font-size:inherit}:is(a,button){background-color:transparent;border:none;margin:0;padding:0;width:100%;}:host{max-width:100%}*{box-sizing:border-box}kol-span-wc{display:grid;place-items:center}kol-span-wc>span{display:flex;place-items:center}a,button{cursor:pointer}button,input,option,select,textarea{font-family:inherit}.icon-only>kol-span-wc>span>span{display:none}.navigation-list{list-style:none}.separator:before{content:'•••'}",B={left:"codicon codicon-debug-reverse-continue"},O={left:"codicon codicon-chevron-left"},A={right:"codicon codicon-chevron-right"},w={right:"codicon codicon-debug-continue"},$=class{constructor(i){c(this,i),this.nonce=d(),this.calcCount=(t,e=1)=>Math.ceil(t/e),this.getCount=()=>this.calcCount(this.state._max,this.state._pageSize),this.onClick=(t,e)=>{typeof this.state._on.onClick=="function"&&this.state._on.onClick(t,e),this.onChangePage(t,e)},this.onChangePage=(t,e)=>{const a=setTimeout(()=>{clearTimeout(a),typeof this.state._on.onChangePage=="function"&&this.state._on.onChangePage(t,e)})},this.onChangePageSize=(t,e)=>{if(typeof(e=parseInt(e[0]))=="number"&&e>0&&this._pageSize!==e){this._pageSize=e;const a=setTimeout(()=>{clearTimeout(a),typeof this.state._on.onChangePageSize=="function"&&this.state._on.onChangePageSize(t,this._pageSize)})}},this.onGoToFirst={onClick:t=>{this.onClick(t,1)}},this.onGoToEnd={onClick:t=>{this.onClick(t,this.getCount())}},this.onGoBackward={onClick:t=>{this.onClick(t,this.state._page-1)}},this.onGoForward={onClick:t=>{this.onClick(t,this.state._page+1)}},this.beforePageSize=(t,e)=>{let a=e.has("_pageSize")?e.get("_pageSize"):this.state._pageSize;const s=e.has("_pageSizeOptions")?e.get("_pageSizeOptions"):this.state._pageSizeOptions;if(Array.isArray(s)&&s.length>0){const _=s.find(u=>u.value===a);a=_===void 0?s[0].value:_.value,e.set("_pageSize",a)}const l=e.has("_page")?e.get("_page"):this.state._page,g=e.has("_max")?e.get("_max"):this.state._max;this.syncPage(e,l,e.get("_pageSize"),g)},this.syncPage=(t,e,a,s)=>{if(s>0){const l=this.calcCount(s,a);l>0&&(e>l?(t.set("_page",l),this.onChangePage(r,l)):e<1&&(t.set("_page",1),this.onChangePage(r,1)))}},this.beforePageSizeOptions=(t,e)=>{const a=[];if(Array.isArray(t))for(const s of t)typeof s=="number"&&a.push({label:n("kol-page-per-site",{placeholders:{entries:`${s}`}}),value:s});e.set("_pageSizeOptions",a),this.beforePageSize(a,e)},this._boundaryCount=1,this._customClass=void 0,this._label=void 0,this._hasButtons=!0,this._page=void 0,this._pageSize=1,this._pageSizeOptions=[],this._on=void 0,this._siblingCount=1,this._tooltipAlign="top",this._max=void 0,this._variant="normal",this.state={_boundaryCount:1,_label:n("kol-pagination"),_hasButtons:{first:!0,last:!0,next:!0,previous:!0},_on:{onClick:()=>null},_page:0,_pageSize:1,_pageSizeOptions:[],_siblingCount:1,_max:0,_variant:"normal"}}render(){var i;let t=!1;const e=this.getCount(),a=Array.from(Array(e).keys()).map(s=>s+1).map(s=>s<=this.state._boundaryCount||s>e-this.state._boundaryCount||s>=this.state._page-this.state._siblingCount&&s<=this.state._page+this.state._siblingCount?(t=!0,this.state._page===s?this.getSelectedPageButton(s):this.getUnselectedPageButton(s)):t===!0?(t=!1,o("li",null,o("span",{class:"separator",key:`${this.nonce}-el-${s}`,"aria-hidden":"true"}))):null);return o(b,null,o("nav",{"aria-label":this.state._label},o("ul",{class:"navigation-list"},this.state._hasButtons.first&&o("li",null,o("kol-button",{class:"first",exportparts:"icon",_customClass:this.state._customClass,_disabled:this.state._page<=1,_icons:B,_hideLabel:!0,_label:n("kol-page-first"),_on:this.onGoToFirst,_variant:this.state._variant,_tooltipAlign:this.state._tooltipAlign})),this.state._hasButtons.previous&&o("li",null,o("kol-button",{class:"previous",exportparts:"icon",_customClass:this.state._customClass,_disabled:this.state._page<=1,_icons:O,_hideLabel:!0,_label:n("kol-page-back"),_on:this.onGoBackward,_variant:this.state._variant,_tooltipAlign:this.state._tooltipAlign})),a,this.state._hasButtons.next&&o("li",null,o("kol-button",{class:"next",exportparts:"icon",_customClass:this.state._customClass,_disabled:e<=this.state._page,_icons:A,_hideLabel:!0,_label:n("kol-page-next"),_on:this.onGoForward,_variant:this.state._variant,_tooltipAlign:this.state._tooltipAlign})),this.state._hasButtons.last&&o("li",null,o("kol-button",{class:"last",exportparts:"icon",_customClass:this.state._customClass,_disabled:e<=this.state._page,_icons:w,_hideLabel:!0,_label:n("kol-page-last"),_on:this.onGoToEnd,_variant:this.state._variant,_tooltipAlign:this.state._tooltipAlign})))),((i=this.state._pageSizeOptions)===null||i===void 0?void 0:i.length)>0&&o("kol-select",{_hideLabel:!0,_id:`pagination-size-${this.nonce}`,_label:n("kol-entries-per-site"),_options:this.state._pageSizeOptions,_on:{onChange:this.onChangePageSize},_value:[this.state._pageSize]}))}getUnselectedPageButton(i){return o("li",null,o("kol-button",{exportparts:"icon",key:`${this.nonce}-${i}`,_customClass:this.state._customClass,_label:`${i}`,_on:{onClick:t=>{this.onClick(t,i)}},_variant:this.state._variant}))}getSelectedPageButton(i){return o("li",null,o("kol-button-wc",{class:"selected",key:`${this.nonce}-selected`,_customClass:this.state._customClass,_disabled:!0,_label:`${i}`,_variant:this.state._variant}))}validateBoundaryCount(i){h(this,"_boundaryCount",Math.max(0,i??1))}validateCustomClass(i){v(this,i)}validateLabel(i,t,e=!1){e||p(this.state._label),C(this,i),k(this.state._label)}validateHasButtons(i){y(this,"_hasButtons",t=>typeof t=="boolean"||typeof t=="string"||typeof t=="object"&&t!==null,new Set(["Boolean","PaginationHasButton"]),i,{hooks:{beforePatch:(t,e)=>{if(typeof t=="boolean")e.set("_hasButtons",{first:t,last:t,next:t,previous:t});else{if(typeof t=="string")try{t=S(t)}catch{e.delete("_hasButtons")}typeof t=="object"&&t!==null&&e.set("_hasButtons",Object.assign(Object.assign({},this.state._hasButtons),{first:typeof t.first=="boolean"?t.first===!0:this.state._hasButtons.first,last:typeof t.last=="boolean"?t.last===!0:this.state._hasButtons.last,next:typeof t.next=="boolean"?t.next===!0:this.state._hasButtons.next,previous:typeof t.previous=="boolean"?t.previous===!0:this.state._hasButtons.previous}))}}}})}validateOn(i){typeof i=="object"&&i!==null&&(this.state=Object.assign(Object.assign({},this.state),{_on:i}))}validatePage(i){h(this,"_page",i,{hooks:{beforePatch:(t,e)=>{const a=e.has("_pageSize")?e.get("_pageSize"):this.state._pageSize,s=e.has("_max")?e.get("_max"):this.state._max;this.syncPage(e,t,a,s)}}})}validatePageSize(i){h(this,"_pageSize",i,{hooks:{beforePatch:this.beforePageSize}})}validatePageSizeOptions(i){z(this,"_pageSizeOptions",t=>typeof t=="number",i,void 0,{hooks:{beforePatch:this.beforePageSizeOptions}})}validateSiblingCount(i){h(this,"_siblingCount",Math.max(0,i??1))}validateMax(i){P(this,i,{hooks:{beforePatch:(t,e)=>{const a=e.has("_page")?e.get("_page"):this.state._page,s=e.has("_pageSize")?e.get("_pageSize"):this.state._pageSize;this.syncPage(e,a,s,t)}}})}validateTooltipAlign(i){f(this,i)}validateVariant(i){m(this,i)}componentWillLoad(){this.validateBoundaryCount(this._boundaryCount),this.validateCustomClass(this._customClass),this.validateHasButtons(this._hasButtons),this.validateLabel(this._label,void 0,!0),this.validateOn(this._on),this.validatePage(this._page),this.validatePageSize(this._pageSize),this.validatePageSizeOptions(this._pageSizeOptions),this.validateSiblingCount(this._siblingCount),this.validateTooltipAlign(this._tooltipAlign),this.validateMax(this._max),this.validateVariant(this._variant),this.validatePage(this._page)}disconnectedCallback(){p(this.state._label)}static get watchers(){return{_boundaryCount:["validateBoundaryCount"],_customClass:["validateCustomClass"],_label:["validateLabel"],_hasButtons:["validateHasButtons"],_on:["validateOn"],_page:["validatePage"],_pageSize:["validatePageSize"],_pageSizeOptions:["validatePageSizeOptions"],_siblingCount:["validateSiblingCount"],_max:["validateMax"],_tooltipAlign:["validateTooltipAlign"],_variant:["validateVariant"]}}};$.style={default:x};export{$ as kol_pagination};
